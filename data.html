<!DOCTYPE html>
<html>



<head>
    <!-- download Zea Engine -- this downloads the latest build from version 3 of the engine -->
    <script src="./libs/zea-engine/index.umd.js"></script>
    <!-- download our stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.9/tailwind.min.css" />

    <script src="https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/src/dom-to-image-more.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/squirrelly@8.0.8/dist/browser/squirrelly.min.js"></script>

    <title>Zea Engine App</title>
    <style>
        table {
            background-color: #666;
            border: 2px solid #000;
            color: #fff;
        }

        table img {
            max-width: 300px;
        }

        thead {
            background-color: #000;
        }

        th {
            font-size: 2em;
        }

        td,
        th {
            border: 1px solid #fff;
            padding: 15px;
        }

        a {
            text-decoration: underline;
        }
    </style>
</head>

<body class="overflow-hidden">

    <div class="layout grid h-screen">
        <main>
            <!-- HTML Canvas -- what we render to -->
            <canvas id="canvas"></canvas>
        </main>
    </div>

    <div id="billboard-template"></div>

    <!-- Run your code here -->
    <script type="module">
        import { prepare } from './src/data.js'
        import { DataPool } from './src/DataPool.js'
        import { template } from './data/templates/infos.js'

        let json = DataPool.create("./src/data.json");
        json.loadData().then((data) => {
            data = json.getObjectFromList("infos", 0);
            let templateContainer = document.querySelector("#billboard-template");
            templateContainer.innerHTML = Sqrl.render(template, data);

            setTimeout(() => {
                domtoimage.toPng(templateContainer).then((pngData) => {
                    var img = new Image();
                    img.onload = function (argument) {
                        prepare(img);
                    };
                    img.src = pngData;
                });
            }, 25);

        })
    </script>


</body>

</html>